<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Chris Rackauckas">
  
  <title>Contributor's Guide - DifferentialEquations.jl</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../assets/Documenter.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Contributor's Guide";
    var mkdocs_page_input_path = "internals/contributors_guide.md";
    var mkdocs_page_url = "/internals/contributors_guide/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
  <script src="../../assets/mathjaxhelper.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> DifferentialEquations.jl</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Introduction</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tutorials</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/ode_example/">Ordinary Differential Equation Example</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/sde_example/">Stochastic Differential Equation Example</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/fempoisson_example/">Poisson Equation Finite Element Method Example</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/femheat_example/">Heat Equation Finite Element Method Example</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tutorials/femstochastic_example/">Stochastic Finite Element Examples</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Solver Options</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../solvers/ode_solve/">Ordinary Differential Equation Solvers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../solvers/sde_solve/">Stochastic Differential Equation Solvers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../solvers/fempoisson_solve/">Poisson Equation Finite Element Method Solvers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../solvers/femheat_solve/">Heat Equation Finite Element Method Solvers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../solvers/fdmstokes_solve/">Stationary Stokes Equation Finite Difference Method Solvers</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Manual</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/overview/">Overview of DifferentialEquations.jl Usage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/ODEProblem/">Defining an ODE Problem</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/SDEProblem/">Defining an SDE Problem</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/FEMProblem/">Defining a Finite Element Problem</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/StokesProblem/">Defining a Stokes Problem</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/mesh/">Meshes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/solution/">The Solution Type</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/plot/">Plot Functions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/convergence/">Convergence Simuations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/conditional_dependencies/">Conditional Dependencies</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../man/progress_bar/">Juno Progress Bar Integration</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Internal Documentation</span></li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Contributor's Guide</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#contributors-guide">Contributor's Guide</a></li>
                
                    <li><a class="toctree-l4" href="#developing-new-solver-algorithms">Developing New Solver Algorithms</a></li>
                
                    <li><a class="toctree-l4" href="#adding-conditional-dependencies">Adding Conditional Dependencies</a></li>
                
                    <li><a class="toctree-l4" href="#developing-a-new-problem">Developing A New Problem</a></li>
                
                    <li><a class="toctree-l4" href="#other-help">Other Help</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../fem_tools/">Internal Finite Element Tools</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../extras/">Extra Functions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../solver_helpers/">Solver Helpers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../notes_on_algorithms/">Notes on Algorithms</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">DifferentialEquations.jl</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Internal Documentation &raquo;</li>
        
      
    
    <li>Contributor's Guide</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/ChrisRackauckas/DifferentialEquations.jl" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><a id='Contributor's-Guide-1'></a></p>
<h1 id="contributors-guide">Contributor's Guide</h1>
<p>So you're looking to help out DifferentialEquations.jl? We'd be happy to have your help. It is recommended you first discuss with some of the developers <a href="https://gitter.im/ChrisRackauckas/DifferentialEquations.jl">on the Gitter channel</a> to make sure that you're up-to-date with current developments.</p>
<p><a id='Developing-New-Solver-Algorithms-1'></a></p>
<h2 id="developing-new-solver-algorithms">Developing New Solver Algorithms</h2>
<p>The easiest way to get started would be to add new solver algorithms. This is a pretty simple task as there are tools which put you right into the "hot loop". For example, take a look at the ODE solver code. The mode <code>solve(::ODEProblem,::AbstractArray)</code> is glue code to a bunch of solver algorithms. The algorithms which are coded in DifferentialEquations.jl can be found in ode_integrators.jl. For example, take a look at the Midpoint method's implementation:</p>
<pre class="codehilite"><code class="language-julia">function ode_midpoint(f::Function,u::AbstractArray,t,Δt,T,iter,
                      maxiters,timeseries,ts,timeseries_steps,save_timeseries,adaptive,progressbar)
  halfΔt = Δt/2
  utilde = similar(u)
  while t &lt; T
    @ode_loopheader
    utilde[:] = u+halfΔt.*f(u,t)
    u = u + Δt.*f(utilde,t+halfΔt)
    @ode_loopfooter
  end
  return u,t,timeseries,ts
end</code></pre>


<p>The parts in the signature are the items you have available. Most are self-explanatory (they are from the ODE problem). The extra are for parts of the header and footer for exiting at max iterations, and plugging into the Juno progressbar. These are done in the <code>@ode_loopheader</code> and <code>@ode_loopfooter</code> macros, which are defined using the <code>@def</code> macro (they essentially copy-paste the code from the line which says <code>@def ode_loopheader begin ... end</code>). Note that the loopfooter code takes care of the code for doing the adaptive timestepping. All that is required for the adaptivity is that the algorithm computes an error estimate <code>EEst</code> each time, save the value <code>utmp</code> to be what will replace <code>u</code> if the step is not rejected, and add the algorithm's symbol is added to the dictionary <code>ODE_DIFFERENTIALEQUATIONSJL_ADAPTIVEALGS</code> in <code>ode_constants.jl</code>. If implicit solving is needed (via NLsolve), add the algorithm's symbol to <code>DIFFERENTIALEQUATIONSJL_IMPLICITALGS</code> and the conditional dependency will be supplied. Note that you may need more function arguments. Use another method as a template.</p>
<p>When the solver is completed, add a call to the solver in the glue code <code>solve(::ODEProblem,::AbstractArray)</code> (you will see all the others), add the symbol for the algorithm to <code>DIFFERENTIALEQUATIONSJL_ALGORITHMS</code>, and the order to <code>DIFFERENTIALEQUATIONSJL_ORDERS</code>. It's that quick! Lastly, add your method to the convergence tests in the appropriate /test file.  Feel free to implement any interesting or educational algorithm: they don't have to be the fastest and it is always is useful to have such algorithms (like Simpson's method) available for demonstration purposes.</p>
<p>Adding algorithms to the other problems is very similar.</p>
<p><a id='Adding-Conditional-Dependencies-1'></a></p>
<h2 id="adding-conditional-dependencies">Adding Conditional Dependencies</h2>
<p>If your algorithm requires a conditional dependency (a package, but not one that everyone who uses DifferentialEquations.jl would need), you can add them as follows. Before the loop, add the line <code>initialize_backend(:PkgName)</code> where <code>:PkgName</code> is the same name as the package you wish to use. Then, in <code>general/backends.jl</code> add a dispatch to <code>init_package</code>. A common one would be:</p>
<pre class="codehilite"><code class="language-julia">init_package(b::backend{:PkgName}) = @eval begin
      import PkgName
      export PkgName
    end</code></pre>


<p>Now inside your method you can use any function from the package via PkgName.function. The first time it is used it import the package (or tell the user to install it).</p>
<p><a id='Developing-A-New-Problem-1'></a></p>
<h2 id="developing-a-new-problem">Developing A New Problem</h2>
<p>To develop a new problem, you need to make a new <code>DEProblem</code> and a new <code>DESolution</code>. The <code>DEProblem</code> type should hold all of the mathematical information about the problem, and the <code>DESolution</code> should hold all of the information for the solution. Then all that is required is to define a <code>solve(::DEProblem,*Extra Mesh Things*;kwargs)</code> which takes in the problem and returns a solution. To add plotting functionality, add a plot recipe for the solution type to <code>/general/plotrecipes</code>. For testing that the algorithm works, add a dispatch for <code>test_convergence</code> which makes a <code>ConvergenceSimulation</code> type. This type already has a plot recipe, so plotting functionality will already be embedded. This requires that your problem can take in a true solution, and has a field <code>errors</code> which is a dictionary of symbols for the different error estimates (L2,L infinity, etc.)</p>
<p><a id='Other-Help-1'></a></p>
<h2 id="other-help">Other Help</h2>
<p>There's always more to be. Improved plot recipes and new series recipes are always nice to add more default plots. It is always helpful to have benchmarks between different algorithms to see "which is best". Adding examples IJulia notebooks to <code>/examples/</code> is a good way to share knowledge about DifferentialEquations.jl. Also, please feel free to comb through the solvers and look for ways to make them more efficient. Lastly, the documentation could always use improvements. If you have any questions on how to help, just ask them in the Gitter!</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../fem_tools/" class="btn btn-neutral float-right" title="Internal Finite Element Tools">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../man/progress_bar/" class="btn btn-neutral" title="Juno Progress Bar Integration"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/ChrisRackauckas/DifferentialEquations.jl" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../man/progress_bar/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../fem_tools/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
